<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>stratos lab</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
        }
        
        header {
            background-color: #2c3e50;
            color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            text-decoration: none;
            color: white;
        }
        
        nav {
            display: flex;
            gap: 2rem;
            align-items: center;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        
        nav a:hover {
            background-color: #34495e;
        }
        
        .lang-switcher {
            display: flex;
            gap: 0.5rem;
        }
        
        .lang-switcher a {
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-size: 0.9rem;
        }
        
        .lang-switcher a.active {
            background-color: #34495e;
        }
        
        main {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 1.5rem;
            background-color: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            min-height: 60vh;
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 1rem;
            font-size: 2.5rem;
        }
        
        h2 {
            color: #34495e;
            margin-top: 2rem;
            margin-bottom: 1rem;
            font-size: 2rem;
        }
        
        h3 {
            color: #34495e;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            font-size: 1.5rem;
        }
        
        p {
            margin-bottom: 1rem;
            color: #555;
        }
        
        ul, ol {
            margin-bottom: 1rem;
            padding-left: 2rem;
        }
        
        li {
            margin-bottom: 0.5rem;
        }
        
        blockquote {
            border-left: 4px solid #3498db;
            padding-left: 1rem;
            margin: 1.5rem 0;
            color: #666;
            font-style: italic;
        }
        
        img {
            max-width: 100%;
            height: auto;
            border-radius: 4px;
            margin: 1rem 0;
        }
        
        figure {
            margin: 1.5rem 0;
        }
        
        figcaption {
            font-size: 0.9rem;
            color: #666;
            margin-top: 0.5rem;
        }
        
        .breadcrumb {
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
            color: #666;
        }
        
        .breadcrumb a {
            color: #3498db;
            text-decoration: none;
        }
        
        .breadcrumb a:hover {
            text-decoration: underline;
        }
        
        .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin: 1.5rem 0;
            align-items: center;
        }
        
        .tag {
            background-color: #ecf0f1;
            color: #2c3e50;
            padding: 0.4rem 0.9rem;
            border-radius: 16px;
            font-size: 0.85rem;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            white-space: nowrap;
            transition: background-color 0.3s, transform 0.2s, box-shadow 0.2s;
            border: 1px solid transparent;
            line-height: 1.4;
            min-height: 28px;
            box-sizing: border-box;
        }
        
        .tag:hover {
            background-color: #3498db;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 2px 6px rgba(52, 152, 219, 0.3);
            border-color: #2980b9;
        }
        
        .tag:visited {
            color: #2c3e50;
        }
        
        .tag:visited:hover {
            color: white;
        }
        
        .tag-search-section {
            margin: 2rem 0;
            padding: 1.5rem;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 12px;
            border: 1px solid #dee2e6;
        }
        
        .tag-search-section h2 {
            margin-top: 0;
            margin-bottom: 0.5rem;
            font-size: 1.5rem;
        }
        
        .tag-search-section p {
            margin-bottom: 1rem;
            color: #666;
        }
        
        .tags-container {
            padding: 0.75rem 1rem;
            background-color: white;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }
        
        .tags-container .tags {
            display: flex;
            flex-wrap: wrap;
            margin: 0;
            gap: 0.5rem;
            align-items: center;
        }
        
        .tags-container .tag {
            flex-shrink: 0;
        }
        
        .global-search {
            margin: 2rem 0;
            padding: 2rem;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 12px;
            border: 1px solid #dee2e6;
            text-align: center;
        }
        
        .global-search-form {
            max-width: 900px;
            margin: 0 auto;
            position: relative;
        }
        
        .global-search-box-wrapper {
            position: relative;
        }
        
        .global-search-box {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            background-color: white;
            border: 2px solid #ddd;
            border-radius: 24px;
            padding: 0.5rem 1rem;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        
        .global-search-box-wrapper:focus-within .global-search-box {
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        
        .global-search-box input {
            flex: 1;
            border: none;
            outline: none;
            font-size: 1rem;
            padding: 0.5rem;
        }
        
        .global-search-box button {
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            padding: 0.25rem;
            color: #7f8c8d;
        }
        
        .global-search-box button:hover {
            color: #3498db;
        }
        
        .search-suggestions {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            margin-top: 0.5rem;
            max-height: 400px;
            overflow-y: auto;
            z-index: 1000;
        }
        
        .suggestion-item {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            text-decoration: none;
            color: #333;
            border-bottom: 1px solid #f0f0f0;
            transition: background-color 0.2s;
        }
        
        .suggestion-item:last-child {
            border-bottom: none;
        }
        
        .suggestion-item:hover {
            background-color: #f8f9fa;
        }
        
        .suggestion-type {
            display: inline-block;
            padding: 0.2rem 0.6rem;
            background-color: #ecf0f1;
            color: #7f8c8d;
            font-size: 0.75rem;
            border-radius: 4px;
            margin-right: 0.75rem;
            min-width: 50px;
            text-align: center;
        }
        
        .suggestion-text {
            flex: 1;
            font-size: 0.95rem;
        }
        
        footer {
            background-color: #2c3e50;
            color: white;
            text-align: center;
            padding: 1.5rem 0;
            margin-top: auto;
            position: relative;
        }
        
        footer p {
            color: white;
            margin: 0;
        }
        
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        
        main {
            flex: 1;
        }
        
        .term {
            position: relative;
            display: inline;
        }
        
        .term-link {
            color: inherit;
            text-decoration: none;
            border-bottom: 1px dashed #3498db;
            transition: all 0.2s ease;
            cursor: help;
            position: relative;
        }
        
        .term-link:hover {
            border-bottom-color: #2980b9;
        }
        
        .term-tooltip {
            visibility: hidden;
            opacity: 0;
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background-color: #2c3e50;
            color: white;
            text-align: left;
            padding: 0.75rem 1rem;
            border-radius: 6px;
            font-size: 0.9rem;
            line-height: 1.5;
            white-space: normal;
            width: 280px;
            max-width: 90vw;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            transition: opacity 0.3s, visibility 0.3s;
            pointer-events: none;
        }
        
        .term-tooltip::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: #2c3e50;
        }
        
        .term-link:hover .term-tooltip {
            visibility: visible;
            opacity: 1;
        }
        
        .unit-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }
        
        .unit-card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 1.5rem;
            transition: transform 0.3s, box-shadow 0.3s;
            text-decoration: none;
            color: inherit;
            display: block;
        }
        
        .unit-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .unit-card h2 {
            margin-top: 0;
            font-size: 1.5rem;
        }
        
        .unit-card .tags {
            margin-top: 1rem;
            margin-bottom: 0;
        }
        
        .unit-card .tag {
            font-size: 0.8rem;
            padding: 0.3rem 0.7rem;
        }
        
        .chapter-list {
            list-style: none;
            padding-left: 0;
        }
        
        .chapter-list li {
            margin-bottom: 1rem;
        }
        
        .chapter-list a {
            display: block;
            padding: 1rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            text-decoration: none;
            color: inherit;
            transition: background-color 0.3s;
        }
        
        .chapter-list a:hover {
            background-color: #f8f9fa;
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <a href="zh/" class="logo">stratos lab</a>
            <nav>
                <a href="zh/">首页</a>
                <a href="zh/glossary/">术语词汇表</a>
                <div class="lang-switcher">
                    
                        <a href="en/" class="active">中文</a>
                        <a href="en/">English</a>
                    
                </div>
            </nav>
        </div>
    </header>
    
    <main>
        
        
        
<div class="breadcrumb">
    <a href="zh/">首页</a> / 
    <a href="zh/tags/">标签</a> / 
    economic-machine
</div>

<h1>标签: economic-machine</h1>


<h2>相关单元</h2>
<div class="unit-grid">
    
    <a href="zh/unit0/" class="unit-card">
        <h2>⚙️ Unit 0: 经济机器是如何运行的</h2>
        <p>这是2008年美国金融危机之后，Ray Dalio在Youtube上分享的30分钟视频《How The Economic Machine Works》《经济机器是如何运行的》，目前已经播放了五百多万次。</p>
    </a>
    
</div>







    </main>
    
    <script>
    // Global term marking script
    (function() {
        const glossary = [{"id":"fundamental-analysis","en":"Fundamental Analysis","zh":"基本面分析","topic":"fundamental-analysis","description":{"en":"The analysis of a company's financial health, business model, and industry position to determine its intrinsic value.","zh":"通过分析公司的财务状况、商业模式和行业地位来判断其内在价值的方法。"}},{"id":"technical-analysis","en":"Technical Analysis","zh":"技术面分析","topic":"fundamental-analysis","description":{"en":"A method of evaluating securities by analyzing statistics generated by market activity, such as past prices and volume.","zh":"通过分析市场活动产生的统计数据（如历史价格和成交量）来评估证券的方法。"}},{"id":"income-statement","en":"Income Statement","zh":"利润表","topic":"financial-statements","description":{"en":"A financial statement that shows a company's revenues and expenses over a specific period, resulting in net income or loss.","zh":"显示公司在特定时期内的收入和支出，最终得出净利润或亏损的财务报表。"}},{"id":"balance-sheet","en":"Balance Sheet","zh":"资产负债表","topic":"financial-statements","description":{"en":"A financial statement that shows a company's assets, liabilities, and shareholders' equity at a specific point in time.","zh":"显示公司在特定时间点的资产、负债和股东权益的财务报表。"}},{"id":"cash-flow-statement","en":"Cash Flow Statement","zh":"现金流量表","topic":"financial-statements","description":{"en":"A financial statement that shows how changes in balance sheet accounts and income affect cash and cash equivalents.","zh":"显示资产负债表账户和收入的变化如何影响现金及现金等价物的财务报表。"}},{"id":"revenue","en":"Revenue","zh":"营业收入","topic":"financial-statements","description":{"en":"The total amount of money generated by a company from its business activities.","zh":"公司通过经营活动产生的总金额。"}},{"id":"gross-profit","en":"Gross Profit","zh":"毛利润","topic":"financial-statements","description":{"en":"Revenue minus the cost of goods sold (COGS).","zh":"营业收入减去营业成本（生产成本）。"}},{"id":"gross-profit-margin","en":"Gross Profit Margin","zh":"毛利率","topic":"financial-statements","description":{"en":"Gross profit divided by revenue, expressed as a percentage.","zh":"毛利润除以营业收入，以百分比表示。"}},{"id":"net-income","en":"Net Income","zh":"净利润","topic":"financial-statements","description":{"en":"Total revenue minus all expenses, taxes, and costs.","zh":"总收入减去所有费用、税收和成本后的利润。"}},{"id":"operating-income","en":"Operating Income","zh":"营业利润","topic":"financial-statements","description":{"en":"Income from a company's core business operations, excluding interest and taxes.","zh":"公司核心业务运营产生的收入，不包括利息和税收。"}},{"id":"eps","en":"EPS (Earnings Per Share)","zh":"每股收益","topic":"valuation","description":{"en":"A company's profit divided by the number of outstanding shares.","zh":"公司利润除以流通股数量。"}},{"id":"pe-ratio","en":"P/E Ratio (Price-to-Earnings)","zh":"市盈率","topic":"valuation","description":{"en":"The ratio of a company's share price to its earnings per share.","zh":"公司股价与每股收益的比率。"}},{"id":"peg-ratio","en":"PEG Ratio","zh":"PEG 比率","topic":"valuation","description":{"en":"P/E ratio divided by the earnings growth rate, used to determine if a stock is overvalued or undervalued.","zh":"市盈率除以盈利增长率，用于判断股票是否被高估或低估。"}},{"id":"dcf","en":"DCF (Discounted Cash Flow)","zh":"折现现金流","topic":"valuation","description":{"en":"A valuation method that estimates the value of an investment based on its expected future cash flows.","zh":"基于预期未来现金流来估算投资价值的估值方法。"}},{"id":"earnings-growth-rate","en":"Earnings Growth Rate","zh":"盈利增长率","topic":"valuation","description":{"en":"The rate at which a company's earnings are increasing over time.","zh":"公司盈利随时间增长的速度。"}},{"id":"economic-moat","en":"Economic Moat","zh":"护城河","topic":"economic-moats","description":{"en":"A competitive advantage that allows a company to maintain superior profitability over competitors.","zh":"使公司能够保持相对于竞争对手的卓越盈利能力的竞争优势。"}},{"id":"competitive-advantage","en":"Competitive Advantage","zh":"竞争优势","topic":"economic-moats","description":{"en":"Factors that allow a company to produce goods or services better or more cheaply than its competitors.","zh":"使公司能够比竞争对手更好或更便宜地生产商品或服务的因素。"}},{"id":"brand-power","en":"Brand Power","zh":"品牌优势","topic":"economic-moats","description":{"en":"The ability of a brand to command premium pricing and customer loyalty.","zh":"品牌能够获得溢价定价和客户忠诚度的能力。"}},{"id":"network-effects","en":"Network Effects","zh":"网络效应","topic":"economic-moats","description":{"en":"A phenomenon where a product or service becomes more valuable as more people use it.","zh":"随着使用人数的增加，产品或服务变得更有价值的现象。"}},{"id":"switching-costs","en":"Switching Costs","zh":"转换成本","topic":"economic-moats","description":{"en":"The costs that a customer incurs when switching from one product or service to another.","zh":"客户从一种产品或服务转换到另一种时产生的成本。"}},{"id":"value-investing","en":"Value Investing","zh":"价值投资","topic":"investment-strategy","description":{"en":"An investment strategy that involves buying securities that appear underpriced by some form of fundamental analysis.","zh":"通过某种形式的基本面分析，购买看似被低估的证券的投资策略。"}},{"id":"growth-investing","en":"Growth Investing","zh":"成长投资","topic":"investment-strategy","description":{"en":"An investment strategy focused on companies that are expected to grow at an above-average rate.","zh":"专注于预期以高于平均速度增长的公司的投资策略。"}},{"id":"index-investing","en":"Index Investing","zh":"指数投资","topic":"investment-strategy","description":{"en":"A passive investment strategy that seeks to replicate the performance of a market index.","zh":"寻求复制市场指数表现的被动投资策略。"}},{"id":"margin-of-safety","en":"Margin of Safety","zh":"安全边际","topic":"investment-strategy","description":{"en":"The difference between the intrinsic value of a security and its market price.","zh":"证券的内在价值与其市场价格之间的差额。"}},{"id":"alpha","en":"Alpha","zh":"阿尔法","topic":"investment-strategy","description":{"en":"A measure of performance on a risk-adjusted basis, representing the excess return of an investment relative to a benchmark.","zh":"风险调整后的表现衡量指标，代表投资相对于基准的超额回报。"}},{"id":"beta","en":"Beta","zh":"贝塔","topic":"investment-strategy","description":{"en":"A measure of a stock's volatility in relation to the overall market.","zh":"衡量股票相对于整体市场波动性的指标。"}},{"id":"index","en":"Index","zh":"指数","topic":"market-indices","description":{"en":"A statistical measure of change in a securities market, representing a portfolio of securities.","zh":"证券市场变化的统计衡量指标，代表一篮子证券。"}},{"id":"snp500","en":"S&P 500","zh":"标普 500","topic":"market-indices","description":{"en":"A stock market index that measures the stock performance of 500 large companies listed on US stock exchanges.","zh":"衡量在美国证券交易所上市的 500 家大公司股票表现的市场指数。"}},{"id":"dow-jones","en":"Dow Jones Industrial Average","zh":"道琼斯工业指数","topic":"market-indices","description":{"en":"A price-weighted average of 30 significant stocks traded on the New York Stock Exchange and NASDAQ.","zh":"在纽约证券交易所和纳斯达克交易的 30 只重要股票的价格加权平均值。"}},{"id":"nasdaq","en":"NASDAQ","zh":"纳斯达克","topic":"market-indices","description":{"en":"A global electronic marketplace for buying and selling securities, and the second-largest stock exchange in the world.","zh":"全球电子证券交易市场，世界第二大证券交易所。"}},{"id":"returns","en":"Returns","zh":"回报率","topic":"market-indices","description":{"en":"The gain or loss on an investment over a specified period, expressed as a percentage.","zh":"投资在特定时期内的收益或损失，以百分比表示。"}},{"id":"economics","en":"Economics","zh":"经济学","topic":"economics","description":{"en":"The social science that studies how individuals, businesses, and governments make choices about allocating resources.","zh":"研究个人、企业和政府如何做出资源配置选择的社会科学。"}},{"id":"debt-cycle","en":"Debt Cycle","zh":"债务周期","topic":"economics","description":{"en":"The recurring pattern of borrowing and repayment that affects economic growth and stability.","zh":"影响经济增长和稳定性的借贷和还款的循环模式。"}},{"id":"economic-machine","en":"Economic Machine","zh":"经济机器","topic":"economics","description":{"en":"A conceptual framework describing how the economy works through transactions, credit, and debt cycles.","zh":"描述经济如何通过交易、信贷和债务周期运作的概念框架。"}},{"id":"assets","en":"Assets","zh":"资产","topic":"financial-statements","description":{"en":"Resources owned by a company that have economic value and can be converted into cash.","zh":"公司拥有的具有经济价值并能转换为现金的资源。"}},{"id":"liabilities","en":"Liabilities","zh":"负债","topic":"financial-statements","description":{"en":"Financial obligations or debts that a company owes to others.","zh":"公司欠他人的财务义务或债务。"}},{"id":"equity","en":"Equity","zh":"股东权益","topic":"financial-statements","description":{"en":"The residual interest in the assets of a company after deducting liabilities.","zh":"扣除负债后公司资产的剩余权益。"}},{"id":"current-assets","en":"Current Assets","zh":"流动资产","topic":"financial-statements","description":{"en":"Assets that are expected to be converted into cash within one year.","zh":"预期在一年内转换为现金的资产。"}},{"id":"fixed-assets","en":"Fixed Assets","zh":"固定资产","topic":"financial-statements","description":{"en":"Long-term tangible assets used in business operations, such as property, plant, and equipment.","zh":"用于业务运营的长期有形资产，如房地产、厂房和设备。"}},{"id":"current-liabilities","en":"Current Liabilities","zh":"流动负债","topic":"financial-statements","description":{"en":"Obligations that are due within one year.","zh":"一年内到期的债务。"}},{"id":"long-term-debt","en":"Long-term Debt","zh":"长期债务","topic":"financial-statements","description":{"en":"Debt obligations that are due in more than one year.","zh":"一年以上到期的债务义务。"}},{"id":"working-capital","en":"Working Capital","zh":"营运资金","topic":"financial-statements","description":{"en":"Current assets minus current liabilities, representing the company's short-term financial health.","zh":"流动资产减去流动负债，代表公司的短期财务健康状况。"}},{"id":"depreciation","en":"Depreciation","zh":"折旧","topic":"financial-statements","description":{"en":"The allocation of the cost of a tangible asset over its useful life.","zh":"将有形资产成本在其使用寿命内进行分配。"}},{"id":"amortization","en":"Amortization","zh":"摊销","topic":"financial-statements","description":{"en":"The process of spreading the cost of an intangible asset over its useful life.","zh":"将无形资产成本在其使用寿命内进行分摊的过程。"}},{"id":"ebitda","en":"EBITDA","zh":"息税折旧摊销前利润","topic":"financial-statements","description":{"en":"Earnings Before Interest, Taxes, Depreciation, and Amortization - a measure of operating performance.","zh":"息税折旧摊销前利润，衡量经营业绩的指标。"}},{"id":"operating-expenses","en":"Operating Expenses","zh":"营业费用","topic":"financial-statements","description":{"en":"Costs incurred in the normal course of business operations, excluding cost of goods sold.","zh":"正常业务运营中产生的成本，不包括销售成本。"}},{"id":"cost-of-goods-sold","en":"Cost of Goods Sold (COGS)","zh":"销售成本","topic":"financial-statements","description":{"en":"Direct costs attributable to the production of goods sold by a company.","zh":"公司销售商品生产所产生的直接成本。"}},{"id":"operating-margin","en":"Operating Margin","zh":"营业利润率","topic":"financial-statements","description":{"en":"Operating income divided by revenue, expressed as a percentage.","zh":"营业利润除以营业收入，以百分比表示。"}},{"id":"net-margin","en":"Net Margin","zh":"净利率","topic":"financial-statements","description":{"en":"Net income divided by revenue, expressed as a percentage.","zh":"净利润除以营业收入，以百分比表示。"}},{"id":"free-cash-flow","en":"Free Cash Flow","zh":"自由现金流","topic":"financial-statements","description":{"en":"Cash generated by a company after accounting for capital expenditures.","zh":"扣除资本支出后公司产生的现金。"}},{"id":"operating-cash-flow","en":"Operating Cash Flow","zh":"经营现金流","topic":"financial-statements","description":{"en":"Cash generated from a company's normal business operations.","zh":"公司正常业务运营产生的现金。"}},{"id":"investing-cash-flow","en":"Investing Cash Flow","zh":"投资现金流","topic":"financial-statements","description":{"en":"Cash flow from investment activities, such as buying or selling assets.","zh":"投资活动产生的现金流，如购买或出售资产。"}},{"id":"financing-cash-flow","en":"Financing Cash Flow","zh":"融资现金流","topic":"financial-statements","description":{"en":"Cash flow from financing activities, such as issuing debt or equity.","zh":"融资活动产生的现金流，如发行债务或股权。"}},{"id":"accounts-receivable","en":"Accounts Receivable","zh":"应收账款","topic":"financial-statements","description":{"en":"Money owed to a company by its customers for goods or services delivered.","zh":"客户因已交付的商品或服务而欠公司的款项。"}},{"id":"accounts-payable","en":"Accounts Payable","zh":"应付账款","topic":"financial-statements","description":{"en":"Money a company owes to its suppliers for goods or services received.","zh":"公司因收到的商品或服务而欠供应商的款项。"}},{"id":"inventory","en":"Inventory","zh":"存货","topic":"financial-statements","description":{"en":"Goods and materials held by a company for sale or production.","zh":"公司持有的用于销售或生产的商品和材料。"}},{"id":"retained-earnings","en":"Retained Earnings","zh":"留存收益","topic":"financial-statements","description":{"en":"The portion of net income that is retained by the company rather than distributed as dividends.","zh":"公司保留而非作为股息分配的净利润部分。"}},{"id":"dividends","en":"Dividends","zh":"股息","topic":"financial-statements","description":{"en":"Distributions of a portion of a company's earnings to shareholders.","zh":"公司将部分收益分配给股东。"}},{"id":"dividend-yield","en":"Dividend Yield","zh":"股息收益率","topic":"financial-statements","description":{"en":"Annual dividend per share divided by the stock price, expressed as a percentage.","zh":"每股年度股息除以股价，以百分比表示。"}},{"id":"market-cap","en":"Market Capitalization","zh":"市值","topic":"valuation","description":{"en":"The total value of a company's outstanding shares, calculated as share price times number of shares.","zh":"公司流通股的总价值，计算为股价乘以股数。"}},{"id":"enterprise-value","en":"Enterprise Value","zh":"企业价值","topic":"valuation","description":{"en":"Total value of a company, including market cap, debt, and cash.","zh":"公司的总价值，包括市值、债务和现金。"}},{"id":"book-value","en":"Book Value","zh":"账面价值","topic":"valuation","description":{"en":"The value of a company according to its balance sheet, calculated as assets minus liabilities.","zh":"根据资产负债表计算的公司价值，即资产减去负债。"}},{"id":"price-to-book","en":"Price-to-Book Ratio (P/B)","zh":"市净率","topic":"valuation","description":{"en":"Market price per share divided by book value per share.","zh":"每股市场价格除以每股账面价值。"}},{"id":"price-to-sales","en":"Price-to-Sales Ratio (P/S)","zh":"市销率","topic":"valuation","description":{"en":"Market capitalization divided by annual revenue.","zh":"市值除以年度营业收入。"}},{"id":"ev-ebitda","en":"EV/EBITDA","zh":"企业价值倍数","topic":"valuation","description":{"en":"Enterprise value divided by EBITDA, used to compare companies.","zh":"企业价值除以EBITDA，用于比较公司。"}},{"id":"intrinsic-value","en":"Intrinsic Value","zh":"内在价值","topic":"valuation","description":{"en":"The true, underlying value of a company or asset, independent of market price.","zh":"公司或资产的真实、潜在价值，独立于市场价格。"}},{"id":"fair-value","en":"Fair Value","zh":"公允价值","topic":"valuation","description":{"en":"The estimated value of an asset based on current market conditions.","zh":"基于当前市场条件估算的资产价值。"}},{"id":"discount-rate","en":"Discount Rate","zh":"折现率","topic":"valuation","description":{"en":"The interest rate used to discount future cash flows to their present value.","zh":"用于将未来现金流折现到现值的利率。"}},{"id":"terminal-value","en":"Terminal Value","zh":"终值","topic":"valuation","description":{"en":"The estimated value of a business beyond the forecast period in DCF analysis.","zh":"DCF分析中预测期之后业务的估计价值。"}},{"id":"wacc","en":"WACC (Weighted Average Cost of Capital)","zh":"加权平均资本成本","topic":"valuation","description":{"en":"The average rate a company expects to pay to finance its assets.","zh":"公司预期为其资产融资所支付的平均利率。"}},{"id":"roe","en":"ROE (Return on Equity)","zh":"净资产收益率","topic":"valuation","description":{"en":"Net income divided by shareholders' equity, measuring profitability relative to equity.","zh":"净利润除以股东权益，衡量相对于权益的盈利能力。"}},{"id":"roa","en":"ROA (Return on Assets)","zh":"资产收益率","topic":"valuation","description":{"en":"Net income divided by total assets, measuring how efficiently assets generate profit.","zh":"净利润除以总资产，衡量资产产生利润的效率。"}},{"id":"roic","en":"ROIC (Return on Invested Capital)","zh":"投资资本回报率","topic":"valuation","description":{"en":"A measure of how well a company uses its capital to generate profits.","zh":"衡量公司使用资本产生利润的能力。"}},{"id":"asset-turnover","en":"Asset Turnover","zh":"资产周转率","topic":"valuation","description":{"en":"Revenue divided by average total assets, measuring asset efficiency.","zh":"营业收入除以平均总资产，衡量资产效率。"}},{"id":"inventory-turnover","en":"Inventory Turnover","zh":"存货周转率","topic":"valuation","description":{"en":"Cost of goods sold divided by average inventory, measuring inventory efficiency.","zh":"销售成本除以平均存货，衡量存货效率。"}},{"id":"cost-advantage","en":"Cost Advantage","zh":"成本优势","topic":"economic-moats","description":{"en":"A competitive advantage achieved through lower production or operational costs.","zh":"通过较低的生产或运营成本获得的竞争优势。"}},{"id":"economies-of-scale","en":"Economies of Scale","zh":"规模经济","topic":"economic-moats","description":{"en":"Cost advantages that arise from increased production volume.","zh":"因生产量增加而产生的成本优势。"}},{"id":"barriers-to-entry","en":"Barriers to Entry","zh":"进入壁垒","topic":"economic-moats","description":{"en":"Obstacles that make it difficult for new competitors to enter a market.","zh":"使新竞争对手难以进入市场的障碍。"}},{"id":"intellectual-property","en":"Intellectual Property","zh":"知识产权","topic":"economic-moats","description":{"en":"Intangible assets such as patents, trademarks, and copyrights that provide competitive protection.","zh":"提供竞争保护的无形资产，如专利、商标和版权。"}},{"id":"regulatory-moat","en":"Regulatory Moat","zh":"监管护城河","topic":"economic-moats","description":{"en":"Competitive advantage derived from government regulations or licenses.","zh":"来自政府法规或许可证的竞争优势。"}},{"id":"distribution-network","en":"Distribution Network","zh":"分销网络","topic":"economic-moats","description":{"en":"A company's system for delivering products to customers, which can be a competitive advantage.","zh":"公司向客户交付产品的系统，可以成为竞争优势。"}},{"id":"supply-chain","en":"Supply Chain","zh":"供应链","topic":"economic-moats","description":{"en":"The network of organizations involved in producing and delivering a product or service.","zh":"参与生产和交付产品或服务的组织网络。"}},{"id":"customer-loyalty","en":"Customer Loyalty","zh":"客户忠诚度","topic":"economic-moats","description":{"en":"The tendency of customers to continue buying from a particular company.","zh":"客户继续从特定公司购买的倾向。"}},{"id":"market-share","en":"Market Share","zh":"市场份额","topic":"economic-moats","description":{"en":"The percentage of total sales in a market that a company controls.","zh":"公司在市场中控制的总销售额百分比。"}},{"id":"pricing-power","en":"Pricing Power","zh":"定价权","topic":"economic-moats","description":{"en":"The ability of a company to raise prices without losing customers.","zh":"公司提高价格而不失去客户的能力。"}},{"id":"portfolio","en":"Portfolio","zh":"投资组合","topic":"investment-strategy","description":{"en":"A collection of investments held by an individual or institution.","zh":"个人或机构持有的投资集合。"}},{"id":"diversification","en":"Diversification","zh":"分散投资","topic":"investment-strategy","description":{"en":"Spreading investments across different assets to reduce risk.","zh":"将投资分散到不同资产以降低风险。"}},{"id":"asset-allocation","en":"Asset Allocation","zh":"资产配置","topic":"investment-strategy","description":{"en":"The process of dividing investments among different asset categories.","zh":"将投资分配到不同资产类别的过程。"}},{"id":"risk-tolerance","en":"Risk Tolerance","zh":"风险承受能力","topic":"investment-strategy","description":{"en":"An investor's ability and willingness to endure market volatility.","zh":"投资者承受市场波动的能力和意愿。"}},{"id":"time-horizon","en":"Time Horizon","zh":"投资期限","topic":"investment-strategy","description":{"en":"The length of time an investor expects to hold an investment.","zh":"投资者预期持有投资的时间长度。"}},{"id":"dollar-cost-averaging","en":"Dollar-Cost Averaging","zh":"定投","topic":"investment-strategy","description":{"en":"Investing a fixed amount regularly regardless of market conditions.","zh":"无论市场条件如何，定期投资固定金额。"}},{"id":"rebalancing","en":"Rebalancing","zh":"再平衡","topic":"investment-strategy","description":{"en":"Adjusting portfolio holdings to maintain desired asset allocation.","zh":"调整投资组合持仓以维持所需的资产配置。"}},{"id":"dividend-investing","en":"Dividend Investing","zh":"股息投资","topic":"investment-strategy","description":{"en":"An investment strategy focused on stocks that pay regular dividends.","zh":"专注于支付定期股息股票的投资策略。"}},{"id":"momentum-investing","en":"Momentum Investing","zh":"动量投资","topic":"investment-strategy","description":{"en":"Buying stocks that have been performing well and selling those that have been performing poorly.","zh":"买入表现良好的股票，卖出表现不佳的股票。"}},{"id":"contrarian-investing","en":"Contrarian Investing","zh":"逆向投资","topic":"investment-strategy","description":{"en":"Investing against prevailing market trends and sentiment.","zh":"逆主流市场趋势和情绪进行投资。"}},{"id":"sector-rotation","en":"Sector Rotation","zh":"板块轮动","topic":"investment-strategy","description":{"en":"Moving investments from one industry sector to another based on economic cycles.","zh":"根据经济周期将投资从一个行业板块转移到另一个。"}},{"id":"market-timing","en":"Market Timing","zh":"市场择时","topic":"investment-strategy","description":{"en":"Attempting to predict market movements to buy low and sell high.","zh":"试图预测市场走势以低买高卖。"}},{"id":"buy-and-hold","en":"Buy and Hold","zh":"买入并持有","topic":"investment-strategy","description":{"en":"A long-term investment strategy of buying securities and holding them regardless of short-term fluctuations.","zh":"买入证券并长期持有，无论短期波动的长期投资策略。"}},{"id":"active-investing","en":"Active Investing","zh":"主动投资","topic":"investment-strategy","description":{"en":"An investment strategy involving frequent buying and selling to outperform the market.","zh":"涉及频繁买卖以超越市场的投资策略。"}},{"id":"passive-investing","en":"Passive Investing","zh":"被动投资","topic":"investment-strategy","description":{"en":"An investment strategy that seeks to match market returns rather than beat them.","zh":"寻求匹配而非超越市场回报的投资策略。"}},{"id":"etf","en":"ETF (Exchange-Traded Fund)","zh":"交易所交易基金","topic":"investment-strategy","description":{"en":"A type of investment fund that trades on stock exchanges like individual stocks.","zh":"像个股一样在证券交易所交易的投资基金类型。"}},{"id":"mutual-fund","en":"Mutual Fund","zh":"共同基金","topic":"investment-strategy","description":{"en":"A professionally managed investment fund that pools money from many investors.","zh":"汇集许多投资者资金的专业管理投资基金。"}},{"id":"hedge-fund","en":"Hedge Fund","zh":"对冲基金","topic":"investment-strategy","description":{"en":"A private investment fund that uses various strategies to generate returns.","zh":"使用各种策略产生回报的私人投资基金。"}},{"id":"volatility","en":"Volatility","zh":"波动性","topic":"investment-strategy","description":{"en":"A measure of the degree of variation in the price of a security over time.","zh":"衡量证券价格随时间变化程度的指标。"}},{"id":"standard-deviation","en":"Standard Deviation","zh":"标准差","topic":"investment-strategy","description":{"en":"A statistical measure of the dispersion of returns around the average.","zh":"衡量回报围绕平均值分散程度的统计指标。"}},{"id":"sharpe-ratio","en":"Sharpe Ratio","zh":"夏普比率","topic":"investment-strategy","description":{"en":"A measure of risk-adjusted return, calculated as excess return divided by standard deviation.","zh":"风险调整后回报的衡量指标，计算为超额回报除以标准差。"}},{"id":"correlation","en":"Correlation","zh":"相关性","topic":"investment-strategy","description":{"en":"A measure of how two investments move in relation to each other.","zh":"衡量两种投资相互关联程度的指标。"}},{"id":"bull-market","en":"Bull Market","zh":"牛市","topic":"market-indices","description":{"en":"A market condition characterized by rising prices and investor optimism.","zh":"以价格上涨和投资者乐观为特征的市场状况。"}},{"id":"bear-market","en":"Bear Market","zh":"熊市","topic":"market-indices","description":{"en":"A market condition characterized by falling prices and investor pessimism.","zh":"以价格下跌和投资者悲观为特征的市场状况。"}},{"id":"market-capitalization","en":"Market Capitalization","zh":"市值","topic":"market-indices","description":{"en":"The total value of all outstanding shares of a company.","zh":"公司所有流通股的总价值。"}},{"id":"large-cap","en":"Large Cap","zh":"大盘股","topic":"market-indices","description":{"en":"Companies with market capitalization typically over $10 billion.","zh":"市值通常超过100亿美元的公司。"}},{"id":"mid-cap","en":"Mid Cap","zh":"中盘股","topic":"market-indices","description":{"en":"Companies with market capitalization typically between $2 billion and $10 billion.","zh":"市值通常在20亿到100亿美元之间的公司。"}},{"id":"small-cap","en":"Small Cap","zh":"小盘股","topic":"market-indices","description":{"en":"Companies with market capitalization typically under $2 billion.","zh":"市值通常低于20亿美元的公司。"}},{"id":"blue-chip","en":"Blue Chip","zh":"蓝筹股","topic":"market-indices","description":{"en":"Large, well-established companies with a history of stable earnings.","zh":"具有稳定盈利历史的大型、成熟公司。"}},{"id":"penny-stock","en":"Penny Stock","zh":"低价股","topic":"market-indices","description":{"en":"Stocks trading at very low prices, typically under $5 per share.","zh":"以极低价格交易的股票，通常每股低于5美元。"}},{"id":"ipo","en":"IPO (Initial Public Offering)","zh":"首次公开发行","topic":"market-indices","description":{"en":"The first sale of stock by a private company to the public.","zh":"私人公司首次向公众出售股票。"}},{"id":"secondary-offering","en":"Secondary Offering","zh":"二次发行","topic":"market-indices","description":{"en":"A sale of additional shares by a company that has already gone public.","zh":"已上市公司出售额外股票。"}},{"id":"stock-split","en":"Stock Split","zh":"股票分割","topic":"market-indices","description":{"en":"Dividing existing shares into multiple shares to lower the price per share.","zh":"将现有股票分割成多股以降低每股价格。"}},{"id":"reverse-split","en":"Reverse Split","zh":"反向分割","topic":"market-indices","description":{"en":"Combining multiple shares into fewer shares to increase the price per share.","zh":"将多股合并为更少的股票以提高每股价格。"}},{"id":"dividend-reinvestment","en":"Dividend Reinvestment","zh":"股息再投资","topic":"market-indices","description":{"en":"Using dividend payments to purchase additional shares of the same stock.","zh":"使用股息支付购买同一股票的额外股份。"}},{"id":"yield","en":"Yield","zh":"收益率","topic":"market-indices","description":{"en":"The income return on an investment, expressed as a percentage.","zh":"投资的收入回报，以百分比表示。"}},{"id":"total-return","en":"Total Return","zh":"总回报","topic":"market-indices","description":{"en":"The combined return from capital appreciation and dividends.","zh":"资本增值和股息的总回报。"}},{"id":"compound-return","en":"Compound Return","zh":"复合回报","topic":"market-indices","description":{"en":"The return on an investment that includes reinvested earnings.","zh":"包括再投资收益的投资回报。"}},{"id":"annualized-return","en":"Annualized Return","zh":"年化回报","topic":"market-indices","description":{"en":"The average return per year over a specific period.","zh":"特定时期内每年的平均回报。"}},{"id":"inflation","en":"Inflation","zh":"通货膨胀","topic":"economics","description":{"en":"The rate at which the general level of prices for goods and services rises.","zh":"商品和服务总体价格水平上涨的速率。"}},{"id":"deflation","en":"Deflation","zh":"通货紧缩","topic":"economics","description":{"en":"A decrease in the general price level of goods and services.","zh":"商品和服务总体价格水平的下降。"}},{"id":"gdp","en":"GDP (Gross Domestic Product)","zh":"国内生产总值","topic":"economics","description":{"en":"The total value of goods and services produced within a country's borders.","zh":"在一个国家境内生产的商品和服务的总价值。"}},{"id":"recession","en":"Recession","zh":"经济衰退","topic":"economics","description":{"en":"A significant decline in economic activity lasting more than a few months.","zh":"持续数月以上的经济活动显著下降。"}},{"id":"depression","en":"Depression","zh":"经济萧条","topic":"economics","description":{"en":"A severe and prolonged downturn in economic activity.","zh":"经济活动的严重和长期低迷。"}},{"id":"monetary-policy","en":"Monetary Policy","zh":"货币政策","topic":"economics","description":{"en":"Actions by a central bank to control money supply and interest rates.","zh":"中央银行控制货币供应和利率的行动。"}},{"id":"fiscal-policy","en":"Fiscal Policy","zh":"财政政策","topic":"economics","description":{"en":"Government spending and taxation policies to influence the economy.","zh":"政府通过支出和税收政策影响经济。"}},{"id":"interest-rate","en":"Interest Rate","zh":"利率","topic":"economics","description":{"en":"The cost of borrowing money or the return on lending money.","zh":"借钱的成本或放贷的回报。"}},{"id":"federal-reserve","en":"Federal Reserve","zh":"美联储","topic":"economics","description":{"en":"The central banking system of the United States.","zh":"美国的中央银行系统。"}},{"id":"quantitative-easing","en":"Quantitative Easing","zh":"量化宽松","topic":"economics","description":{"en":"A monetary policy where a central bank purchases securities to increase money supply.","zh":"中央银行购买证券以增加货币供应的货币政策。"}},{"id":"yield-curve","en":"Yield Curve","zh":"收益率曲线","topic":"economics","description":{"en":"A graph showing the relationship between bond yields and their maturities.","zh":"显示债券收益率与其到期期限关系的图表。"}},{"id":"credit-crunch","en":"Credit Crunch","zh":"信贷紧缩","topic":"economics","description":{"en":"A sudden reduction in the availability of loans or credit.","zh":"贷款或信贷可用性的突然减少。"}},{"id":"liquidity","en":"Liquidity","zh":"流动性","topic":"economics","description":{"en":"The ease with which an asset can be converted into cash.","zh":"资产转换为现金的容易程度。"}},{"id":"solvency","en":"Solvency","zh":"偿付能力","topic":"economics","description":{"en":"The ability of a company to meet its long-term financial obligations.","zh":"公司履行长期财务义务的能力。"}},{"id":"qualitative-analysis","en":"Qualitative Analysis","zh":"定性分析","topic":"fundamental-analysis","description":{"en":"Analysis based on non-numerical factors such as management quality and brand strength.","zh":"基于非数字因素的分析，如管理质量和品牌实力。"}},{"id":"quantitative-analysis","en":"Quantitative Analysis","zh":"定量分析","topic":"fundamental-analysis","description":{"en":"Analysis based on numerical data and mathematical models.","zh":"基于数值数据和数学模型的分析。"}},{"id":"top-down-analysis","en":"Top-Down Analysis","zh":"自上而下分析","topic":"fundamental-analysis","description":{"en":"An investment approach that starts with macroeconomic factors and narrows to specific companies.","zh":"从宏观经济因素开始，缩小到特定公司的投资方法。"}},{"id":"bottom-up-analysis","en":"Bottom-Up Analysis","zh":"自下而上分析","topic":"fundamental-analysis","description":{"en":"An investment approach that starts with individual companies and builds up to the broader market.","zh":"从个别公司开始，逐步构建到更广泛市场的投资方法。"}},{"id":"industry-analysis","en":"Industry Analysis","zh":"行业分析","topic":"fundamental-analysis","description":{"en":"Evaluation of the competitive dynamics and prospects of a specific industry.","zh":"评估特定行业的竞争动态和前景。"}},{"id":"competitive-analysis","en":"Competitive Analysis","zh":"竞争分析","topic":"fundamental-analysis","description":{"en":"Assessment of a company's position relative to its competitors.","zh":"评估公司相对于竞争对手的地位。"}},{"id":"swot-analysis","en":"SWOT Analysis","zh":"SWOT分析","topic":"fundamental-analysis","description":{"en":"Analysis of Strengths, Weaknesses, Opportunities, and Threats.","zh":"对优势、劣势、机会和威胁的分析。"}},{"id":"management-quality","en":"Management Quality","zh":"管理质量","topic":"fundamental-analysis","description":{"en":"Assessment of a company's leadership and their ability to execute strategy.","zh":"评估公司的领导力及其执行战略的能力。"}},{"id":"corporate-governance","en":"Corporate Governance","zh":"公司治理","topic":"fundamental-analysis","description":{"en":"The system of rules and practices by which a company is directed and controlled.","zh":"公司被指导和控制的规则和实践体系。"}},{"id":"earnings-quality","en":"Earnings Quality","zh":"盈利质量","topic":"fundamental-analysis","description":{"en":"The degree to which reported earnings reflect the true economic performance of a company.","zh":"报告盈利反映公司真实经济表现的程度。"}},{"id":"revenue-recognition","en":"Revenue Recognition","zh":"收入确认","topic":"fundamental-analysis","description":{"en":"The accounting principle that determines when revenue is recorded.","zh":"确定何时记录收入的会计原则。"}},{"id":"accrual-accounting","en":"Accrual Accounting","zh":"权责发生制","topic":"fundamental-analysis","description":{"en":"An accounting method where revenue and expenses are recorded when earned or incurred, not when cash is received.","zh":"在赚取或发生时记录收入和费用的会计方法，而不是在收到现金时。"}},{"id":"cash-accounting","en":"Cash Accounting","zh":"现金收付制","topic":"fundamental-analysis","description":{"en":"An accounting method where transactions are recorded only when cash is received or paid.","zh":"仅在收到或支付现金时记录交易的会计方法。"}},{"id":"audit","en":"Audit","zh":"审计","topic":"fundamental-analysis","description":{"en":"An independent examination of a company's financial statements.","zh":"对公司财务报表的独立检查。"}},{"id":"gaap","en":"GAAP (Generally Accepted Accounting Principles)","zh":"公认会计原则","topic":"fundamental-analysis","description":{"en":"Standard accounting principles and procedures used in financial reporting.","zh":"财务报表中使用的标准会计原则和程序。"}},{"id":"ifrs","en":"IFRS (International Financial Reporting Standards)","zh":"国际财务报告准则","topic":"fundamental-analysis","description":{"en":"International accounting standards used in many countries outside the US.","zh":"美国以外许多国家使用的国际会计准则。"}}];
        const lang = 'zh';
        const pathPrefix = '';
        
        if (!glossary || !Array.isArray(glossary)) return;
        
        // Sort terms by length (longest first) to avoid partial matches
        const sortedTerms = [...glossary].sort((a, b) => {
            const aLen = Math.max(a.en.length, a.zh.length);
            const bLen = Math.max(b.en.length, b.zh.length);
            return bLen - aLen;
        });
        
        function markTermsInElement(element) {
            if (!element) return;
            
            // Process all text nodes
            const walker = document.createTreeWalker(
                element,
                NodeFilter.SHOW_TEXT,
                {
                    acceptNode: function(node) {
                        // Skip script, style, and already marked terms
                        const parent = node.parentElement;
                        if (parent && (
                            parent.tagName === 'SCRIPT' || 
                            parent.tagName === 'STYLE' || 
                            parent.classList.contains('term') ||
                            parent.closest('.term')
                        )) {
                            return NodeFilter.FILTER_REJECT;
                        }
                        return NodeFilter.FILTER_ACCEPT;
                    }
                }
            );
            
            const textNodes = [];
            let node;
            while (node = walker.nextNode()) {
                textNodes.push(node);
            }
            
            // Collect all text nodes first, then process
            const processedText = new Map();
            
            textNodes.forEach(textNode => {
                let text = textNode.textContent;
                processedText.set(textNode, text);
            });
            
            // Process each text node only once, avoiding nested matches
            processedText.forEach((text, textNode) => {
                let newHTML = text;
                const matches = [];
                
                // Find all matches first
                sortedTerms.forEach(term => {
                    const termDescription = lang === 'zh' ? term.description.zh : term.description.en;
                    const escapedDescription = termDescription.replace(/"/g, '&quot;').replace(/'/g, '&#39;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
                    
                    // Mark English terms (whole word)
                    const enRegex = new RegExp(`\\b${term.en.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')}\\b`, 'gi');
                    let match;
                    while ((match = enRegex.exec(text)) !== null) {
                        matches.push({
                            index: match.index,
                            length: match[0].length,
                            text: match[0],
                            termId: term.id,
                            description: escapedDescription
                        });
                    }
                    
                    // Mark Chinese terms
                    const zhRegex = new RegExp(term.zh.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g');
                    while ((match = zhRegex.exec(text)) !== null) {
                        matches.push({
                            index: match.index,
                            length: match[0].length,
                            text: match[0],
                            termId: term.id,
                            description: escapedDescription
                        });
                    }
                });
                
                // Sort matches by index, remove overlapping ones
                matches.sort((a, b) => a.index - b.index);
                const nonOverlapping = [];
                let lastEnd = 0;
                
                matches.forEach(match => {
                    if (match.index >= lastEnd) {
                        nonOverlapping.push(match);
                        lastEnd = match.index + match.length;
                    }
                });
                
                // Build new HTML from back to front to preserve indices
                if (nonOverlapping.length > 0) {
                    let result = '';
                    let lastIndex = 0;
                    
                    nonOverlapping.forEach(match => {
                        result += text.substring(lastIndex, match.index);
                        result += `<span class="term" data-term-id="${match.termId}"><span class="term-link">${match.text}<span class="term-tooltip">${match.description}</span></span></span>`;
                        lastIndex = match.index + match.length;
                    });
                    result += text.substring(lastIndex);
                    
                    const wrapper = document.createElement('span');
                    wrapper.innerHTML = result;
                    textNode.parentNode.replaceChild(wrapper, textNode);
                }
            });
        }
        
        // Mark terms when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                if (window.location.pathname.includes('/glossary/')) {
                    // On glossary page, only mark terms in description paragraphs, not in term names
                    const descriptions = document.querySelectorAll('.term-description');
                    descriptions.forEach(desc => markTermsInElement(desc));
                } else {
                    // On other pages, mark terms in content
                    const content = document.querySelector('.content, #chapterContent');
                    if (content) markTermsInElement(content);
                }
            });
        } else {
            if (window.location.pathname.includes('/glossary/')) {
                // On glossary page, only mark terms in description paragraphs
                const descriptions = document.querySelectorAll('.term-description');
                descriptions.forEach(desc => markTermsInElement(desc));
            } else {
                // On other pages, mark terms in content
                const content = document.querySelector('.content, #chapterContent');
                if (content) markTermsInElement(content);
            }
        }
    })();
    </script>
    
    <footer>
        <p>&copy; 2025 Jiaming Wang</p>
    </footer>
</body>
</html>

